---
source: tests/trace_cli.rs
info: "save\nset structural\nswap\ncompare"
---
Current ruleset was saved
allow_ref_pat_on_ref_mut: true -> false
match_constructor_through_ref: true -> false
ref_binding_on_inherited: "Error" -> "AllocTemporary"
simplify_deref_mut: true -> false

-p0 @ &(*q).0: &T0,  p1 @ &(*q).1: &T1
-------------------------------------- "ConstructorRef"
-[p0, p1] @ q: &[T0, T1]

-p0 @ &mut (*q).0: &mut T0,  p1 @ &mut (*q).1: &mut T1
------------------------------------------------------ "ConstructorRef"
-[p0, p1] @ q: &mut [T0, T1]

-[p0, p1] @ *q: &T
------------------ "ConstructorMultiRef"
-[p0, p1] @ q: &&T

-[p0, p1] @ &**q: &T
---------------------- "ConstructorMultiRef"
-[p0, p1] @ q: &&mut T

-[p0, p1] @ *q: &T
---------------------- "ConstructorMultiRef"
-[p0, p1] @ q: &mut &T

-[p0, p1] @ &mut **q: &mut T
---------------------------- "ConstructorMultiRef"
-[p0, p1] @ q: &mut &mut T

-p @ *&*q: T
--------------- "DerefMutWithShared(EatOuter)"
-&p @ q: &mut T

-x @ &q: &T
----------------------------------- "BindingBorrow"
-ref x @ q: T, q is not a reference

-x @ &mut q: &mut T
--------------------------------------- "BindingBorrow"
-ref mut x @ q: T, q is not a reference

+x @ &q: &T
+------------ "BindingBorrow"
+ref x @ q: T

+x @ &mut q: &mut T
+------------------ "BindingBorrow"
+ref mut x @ q: T

Current and saved rulesets were swapped
allow_ref_pat_on_ref_mut: false -> true
match_constructor_through_ref: false -> true
ref_binding_on_inherited: "AllocTemporary" -> "Error"
simplify_deref_mut: false -> true

+p0 @ &(*q).0: &T0,  p1 @ &(*q).1: &T1
+------------------------------------- "ConstructorRef"
+[p0, p1] @ q: &[T0, T1]

+p0 @ &mut (*q).0: &mut T0,  p1 @ &mut (*q).1: &mut T1
+----------------------------------------------------- "ConstructorRef"
+[p0, p1] @ q: &mut [T0, T1]

+[p0, p1] @ *q: &T
+----------------- "ConstructorMultiRef"
+[p0, p1] @ q: &&T

+[p0, p1] @ &**q: &T
+--------------------- "ConstructorMultiRef"
+[p0, p1] @ q: &&mut T

+[p0, p1] @ *q: &T
+--------------------- "ConstructorMultiRef"
+[p0, p1] @ q: &mut &T

+[p0, p1] @ &mut **q: &mut T
+--------------------------- "ConstructorMultiRef"
+[p0, p1] @ q: &mut &mut T

+p @ *&*q: T
+-------------- "DerefMutWithShared(EatOuter)"
+&p @ q: &mut T

-x @ &q: &T
------------- "BindingBorrow"
-ref x @ q: T

-x @ &mut q: &mut T
------------------- "BindingBorrow"
-ref mut x @ q: T

+x @ &q: &T
+---------------------------------- "BindingBorrow"
+ref x @ q: T, q is not a reference

+x @ &mut q: &mut T
+-------------------------------------- "BindingBorrow"
+ref mut x @ q: T, q is not a reference

The two rulesets are described by the following sets of rules, with differences highlighted.

 p0 @ q.0: T0,  p1 @ q.1: T1                                                      | p0 @ q.0: T0,  p1 @ q.1: T1
 --------------------------- "Constructor"                                        | --------------------------- "Constructor"
 [p0, p1] @ q: [T0, T1]                                                           | [p0, p1] @ q: [T0, T1]

                                                                                  | p0 @ &(*q).0: &T0,  p1 @ &(*q).1: &T1
                                                                                  | ------------------------------------- "ConstructorRef"
                                                                                  | [p0, p1] @ q: &[T0, T1]

                                                                                  | p0 @ &mut (*q).0: &mut T0,  p1 @ &mut (*q).1: &mut T1
                                                                                  | ----------------------------------------------------- "ConstructorRef"
                                                                                  | [p0, p1] @ q: &mut [T0, T1]

                                                                                  | [p0, p1] @ *q: &T
                                                                                  | ----------------- "ConstructorMultiRef"
                                                                                  | [p0, p1] @ q: &&T

                                                                                  | [p0, p1] @ &**q: &T
                                                                                  | --------------------- "ConstructorMultiRef"
                                                                                  | [p0, p1] @ q: &&mut T

                                                                                  | [p0, p1] @ *q: &T
                                                                                  | --------------------- "ConstructorMultiRef"
                                                                                  | [p0, p1] @ q: &mut &T

                                                                                  | [p0, p1] @ &mut **q: &mut T
                                                                                  | --------------------------- "ConstructorMultiRef"
                                                                                  | [p0, p1] @ q: &mut &mut T

 p @ *q: T                                                                        | p @ *q: T
 ---------- "Deref(EatOuter)"                                                     | ---------- "Deref(EatOuter)"
 &p @ q: &T                                                                       | &p @ q: &T

 p @ *q: T                                                                        | p @ *q: T
 ------------------ "Deref(EatOuter)"                                             | ------------------ "Deref(EatOuter)"
 &mut p @ q: &mut T                                                               | &mut p @ q: &mut T

                                                                                  | p @ *&*q: T
                                                                                  | -------------- "DerefMutWithShared(EatOuter)"
                                                                                  | &p @ q: &mut T

 x @ &q: &T                                                                       | x @ &q: &T
 ---------------------------------- "BindingBorrow"                               | ---------------------------------- "BindingBorrow"
 ref x @ q: T, q is not a reference                                               | ref x @ q: T, q is not a reference

 x @ &&q: &&T                                                                     |  
 -------------- "BindingBorrow"                                                   |  
 ref x @ &q: &T                                                                   |  

 x @ &&mut q: &&mut T                                                             |  
 ---------------------- "BindingBorrow"                                           |  
 ref x @ &mut q: &mut T                                                           |  

 x @ &mut q: &mut T                                                               | x @ &mut q: &mut T
 -------------------------------------- "BindingBorrow"                           | -------------------------------------- "BindingBorrow"
 ref mut x @ q: T, q is not a reference                                           | ref mut x @ q: T, q is not a reference

 x @ &mut &q: &mut &T                                                             |  
 -------------------- "BindingBorrow"                                             |  
 ref mut x @ &q: &T                                                               |  

 x @ &mut &mut q: &mut &mut T                                                     |  
 ---------------------------- "BindingBorrow"                                     |  
 ref mut x @ &mut q: &mut T                                                       |  

 let x: T = q                                                                     | let x: T = q
 ------------ "Binding"                                                           | ------------ "Binding"
 x @ q: T                                                                         | x @ q: T

 let mut x: T = q                                                                 | let mut x: T = q
 ---------------- "Binding"                                                       | ---------------- "Binding"
 mut x @ q: T                                                                     | mut x @ q: T
